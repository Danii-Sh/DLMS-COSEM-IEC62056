#include <mega32.h>
#include <delay.h>


int i;
char get367_2[]={0xC0 , 0x01  ,0x81 , 0x00 , 0x03 , 0x00, 0x00 , 0x60, 0x09 , 0x00, 0xFF , 0x02 ,  0x00};
char action367[]={0xC3 , 0x01  ,0x81 , 0x00 , 0x03 , 0x00, 0x00 , 0x60, 0x09 , 0x00, 0xFF , 0x01 ,  0x00};
char get201_2[]= {0xC0 , 0x01  ,0x81 , 0x00 , 0x01 , 0x00, 0x00 , 0x2A, 0x00 , 0x00, 0xFF , 0x02 ,  0x00};                  
char set201_2[]= {0xC1 , 0x01  ,0x81 , 0x00 , 0x01 , 0x00, 0x00 , 0x2A, 0x00 , 0x00, 0xFF , 0x02 ,  0x00, 0x09 , 0x06, 0x90 , 0x90, 0x90 , 0x90,0x90 ,0x90};             
        

void main()
{
DDRB=0xff;

// USART initialization
// Communication Parameters: 8 Data, 1 Stop, No Parity
// USART Receiver: On
// USART Transmitter: On
// USART Mode: Asynchronous
// USART Baud Rate: 110
UCSRA=0x00;
UCSRB=0x98;
UCSRC=0x86;
UBRRH=0x02;
UBRRL=0x37;



PORTB=0xff;   
delay_ms(10000);



i=0;
while(i!=21)
{
UDR=set201_2[i];
while(UCSRA.5!=1)
{}
i++;
}
delay_ms(2000);

i=0;
while(i!=13)
{
UDR=get201_2[i];
while(UCSRA.5!=1)
{}
i++;
}
delay_ms(2000);

i=0;
while(i!=13)
{
UDR=action367[i];
while(UCSRA.5!=1)
{}
i++;
}

PORTB=0x88;
delay_ms(2000);

   

i=0;
while(i!=13)
{
UDR=get367_2[i];
while(UCSRA.5!=1)
{}
i++;
}








PORTB=0x88;   

} 